# ~/.config/git/config: user-global git config
# see git(1) git-config(1)

[core]
	editor = nvim
	excludesfile = ~/.gitignore
	attributesfile = ~/.gitattributes
	ignorecase = false
	compression = 0

[init]
	defaultBranch = main
	templateDir = ~/.local/share/git/templates

[credential]
	helper = cache --timeout 3600

[user]
	name = Patrick DeYoreo

[push]
	default = current
	autoSetupRemote = true

[pull]
	rebase = false

[advice]
	pushUpdateRejected

[color]
	ui = auto

[color "decorate"]
	branch = green
	remoteBranch = red
	stash = blue
	tag = yellow

[color "diff"]
	meta = white bold
	frag = cyan bold
	old = red bold
	new = green bold

[protocol "file"]
	allow = always

[alias]
	# Fix lines like "git git COMMAND"
	git = !git

	a = add
	aa = add -A

	c = commit
	cm = commit -m

	b = branch
	ba = branch -a

	co = checkout
	cb = checkout -b

	m = merge
	ma = merge --abort
	mc = merge --continue

	st = status
	ss = status --short --branch

	sw = switch
	swc = switch --create

	sm = submodule

	# Commit history
	l = log --all --graph --decorate --oneline
	ll = log --stat --abbrev-commit

	# List of contributors with commit totals
	contrib = shortlog -sn

	# Ammend last commit with its original message
	amend = "!__git_amend() { git log -n 1 --pretty=tformat:%s%n%n%b | git commit -F - --amend; }; __git_amend"

	# Initialize, add all files and commit
	new = "!__git_new() { git init && touch README.md && git add -A && git commit -m \"Initial commit\"; }; __git_new"

	# Pull from remote and push from local
	sync = "!__git_sync() { git pull && git push; }; __git_sync"

	# Retrieve a gitignore template from gitignore.io
	ignore = "!__git_ignore() { set -x; if test \"$#\" -gt 0; then curl -fsSL \"https://www.toptal.com/developers/gitignore/api/$*\"; else >&2 echo \"git ignore: error: expected a list of project types for which to retrieve a template - got none\"; >&2 echo \"usage: git ignore TYPE [TYPE ...]\"; exit 2; fi; }; IFS=, __git_ignore"

	# Checkout and pull
	dev = "!__git_dev() { git checkout dev && git pull --prune; }; __git_dev"
	develop = "!__git_develop() { git checkout develop && git pull --prune; }; __git_develop"

	main = "!__git_main() { git checkout main && git pull --prune; }; __git_main"
	master = "!__git_master() { git checkout master && git pull --prune; }; __git_master"
	prod = "!__git_prod() { git checkout prod && git pull --prune; }; __git_prod"

# vi:ft=gitconfig:ts=8:sw=8:noet
